/*! For license information please see main.6d109cfe.js.LICENSE.txt */
(()=>{var e={175:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,s=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function u(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function c(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},575:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,a=/^\d/,i=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,s=new t(512),l=new t(512),u=new t(512);function c(e){return s.get(e)||s.set(e,d(e).map((function(e){return e.replace(o,"$2")})))}function d(e){return e.match(n)||[""]}function h(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function f(e){return!h(e)&&(function(e){return e.match(a)&&!e.match(r)}(e)||function(e){return i.test(e)}(e))}e.exports={Cache:t,split:d,normalizePath:c,setter:function(e){var t=c(e);return l.get(e)||l.set(e,(function(e,n){for(var r=0,a=t.length,i=e;r<a-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;i=i[t[r++]]}i[t[r]]=n}))},getter:function(e,t){var n=c(e);return u.get(e)||u.set(e,(function(e){for(var r=0,a=n.length;r<a;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(h(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,a,i,o,s=e.length;for(a=0;a<s;a++)(r=e[a])&&(f(r)&&(r='"'+r+'"'),i=!(o=h(r))&&/^\d+$/.test(r),t.call(n,r,o,i,a,e))}(Array.isArray(e)?e:d(e),t,n)}}},4:(e,t,n)=>{"use strict";var r=n(853),a=n(43),i=n(950);function o(e){var t="https://9ec96ccd-c6a6-47a0-8163-2b5febfd92cb.preview.emergentagent.com","/api"),wm=()=>{const[t,n]=(0,e.useState)(null),[r,a]=(0,e.useState)(null),[i,o]=(0,e.useState)(!1),[l,u]=(0,e.useState)(!1),[c,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(!0),[p,m]=(0,e.useState)((()=>{const e=localStorage.getItem("ai_companion_dark_mode");return!!e&&JSON.parse(e)})),[g,y]=(0,e.useState)([]),[v,b]=(0,e.useState)({});(0,e.useEffect)((()=>{k()}),[]),(0,e.useEffect)((()=>{localStorage.setItem("ai_companion_dark_mode",JSON.stringify(p))}),[p]),(0,e.useEffect)((()=>{r&&null!==t&&void 0!==t&&t.id&&x(r)}),[r,null===t||void 0===t?void 0:t.id]);const x=async e=>{try{const n=localStorage.getItem("chat_history_".concat(null===t||void 0===t?void 0:t.id,"_").concat(e));if(n){const t=JSON.parse(n);y(t),b((n=>s(s({},n),{},{[e]:t})))}else{const n={id:Date.now(),type:"bot",content:"Hi ".concat(null===t||void 0===t?void 0:t.name,"! \ud83d\udc4b I'm Buddy, your AI companion. How can I help you today?"),timestamp:(new Date).toISOString()};y([n]),b((t=>s(s({},t),{},{[e]:[n]})))}}catch(n){console.error("Error loading chat history:",n);const e={id:Date.now(),type:"bot",content:"Hi ".concat(null===t||void 0===t?void 0:t.name,"! \ud83d\udc4b I'm Buddy, your AI companion. How can I help you today?"),timestamp:(new Date).toISOString()};y([e])}},w=e=>{const n=s(s({},e),{},{id:Date.now(),timestamp:(new Date).toISOString()});y((e=>{const a=[...e,n];return r&&((e,n)=>{try{localStorage.setItem("chat_history_".concat(null===t||void 0===t?void 0:t.id,"_").concat(e),JSON.stringify(n)),b((t=>s(s({},t),{},{[e]:n})))}catch(r){console.error("Error saving chat history:",r)}})(r,a),a}))},k=async()=>{try{const t=localStorage.getItem("ai_companion_user");if(!t)return o(!0),void f(!1);const r=JSON.parse(t);try{const e=await fetch("".concat(xm,"/users/profile/").concat(r.id),{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();n(t),await S(t.id),await j(t.id)}else localStorage.removeItem("ai_companion_user"),o(!0)}catch(e){console.error("Error verifying user profile with backend:",e),localStorage.removeItem("ai_companion_user"),o(!0)}}catch(e){console.error("Error checking user profile:",e),o(!0)}finally{f(!1)}},S=async e=>{try{const t=await fetch("".concat(xm,"/conversations/session"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,session_name:"Chat Session"})}),n=await t.json();if(!t.ok)throw new Error(n.detail||"Failed to create session");a(n.id)}catch(t){console.error("Error creating session:",t),Rc.error("Failed to create chat session")}},j=async e=>{try{const t=await fetch("".concat(xm,"/users/").concat(e,"/parental-controls")),n=await t.json();t.ok&&d(n)}catch(t){console.error("Error loading parental controls:",t)}},E=()=>(0,ma.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,ma.jsxs)(wu.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-4xl mx-auto text-center",children:[(0,ma.jsxs)("div",{className:"mb-12",children:[(0,ma.jsx)(wu.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl",children:(0,ma.jsx)("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ma.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,ma.jsx)(wu.h1,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Meet Your AI Buddy"}),(0,ma.jsx)(wu.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"text-xl text-gray-600 max-w-2xl mx-auto mb-8",children:"Your smart companion for stories, songs, learning, and fun conversations. Safe, educational, and designed just for you!"})]}),(0,ma.jsxs)(wu.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[(0,ma.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100",children:[(0,ma.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,ma.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ma.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 016 0v6a3 3 0 01-3 3z"})})}),(0,ma.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Voice Chat"}),(0,ma.jsx)("p",{className:"text-gray-600",children:"Talk naturally with your AI companion using voice messages and responses."})]}),(0,ma.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100",children:[(0,ma.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,ma.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ma.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),(0,ma.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Stories & Songs"}),(0,ma.jsx)("p",{className:"text-gray-600",children:"Enjoy bedtime stories, nursery rhymes, and educational content."})]}),(0,ma.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100",children:[(0,ma.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,ma.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ma.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,ma.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Safe & Secure"}),(0,ma.jsx)("p",{className:"text-gray-600",children:"Built with child safety in mind, with parental controls and monitoring."})]})]}),(0,ma.jsx)(wu.button,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},onClick:()=>o(!0),className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl text-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:scale-105",children:"Get Started"})]})}),N=()=>(0,ma.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,ma.jsx)(Qc,{user:t,onOpenProfile:()=>o(!0),onOpenSettings:()=>u(!0)}),(0,ma.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,ma.jsx)($p,{user:t,sessionId:r,darkMode:p,setDarkMode:m,messages:g,onAddMessage:w})})]}),T=()=>(0,ma.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,ma.jsx)(Qc,{user:t,onOpenProfile:()=>o(!0),onOpenSettings:()=>u(!0)}),(0,ma.jsx)("div",{className:"flex-1 overflow-auto",children:(0,ma.jsx)(im,{user:t,sessionId:r})})]}),C=()=>(0,ma.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,ma.jsx)(Qc,{user:t,onOpenProfile:()=>o(!0),onOpenSettings:()=>u(!0)}),(0,ma.jsx)("div",{className:"flex-1 overflow-auto",children:(0,ma.jsx)(mm,{user:t,onOpenProfileSetup:()=>o(!0)})})]}),F=()=>(0,ma.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,ma.jsx)(Qc,{user:t,onOpenProfile:()=>o(!0),onOpenSettings:()=>u(!0)}),(0,ma.jsx)("div",{className:"flex-1 overflow-auto",children:(0,ma.jsx)(bm,{user:t,onOpenProfile:()=>o(!0),onOpenParentalControls:()=>u(!0)})})]});return h?(0,ma.jsx)(Mc,{children:(0,ma.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,ma.jsxs)("div",{className:"text-center",children:[(0,ma.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,ma.jsx)("p",{className:"text-gray-600",children:"Loading your AI companion..."})]})})}):(0,ma.jsxs)(Mc,{children:[(0,ma.jsx)(ct,{children:(0,ma.jsxs)(Fe,{children:[(0,ma.jsx)(Te,{path:"/",element:t?(0,ma.jsx)(Ne,{to:"/chat"}):(0,ma.jsx)(E,{})}),(0,ma.jsx)(Te,{path:"/chat",element:t?(0,ma.jsx)(N,{}):(0,ma.jsx)(Ne,{to:"/"})}),(0,ma.jsx)(Te,{path:"/stories",element:t?(0,ma.jsx)(T,{}):(0,ma.jsx)(Ne,{to:"/"})}),(0,ma.jsx)(Te,{path:"/profile",element:t?(0,ma.jsx)(C,{}):(0,ma.jsx)(Ne,{to:"/"})}),(0,ma.jsx)(Te,{path:"/settings",element:t?(0,ma.jsx)(F,{}):(0,ma.jsx)(Ne,{to:"/"})})]})}),(0,ma.jsx)(hp,{isOpen:i,onClose:()=>o(!1),onSave:t?async e=>{try{if(null===t||void 0===t||!t.id)throw new Error("No user profile to update");const r={name:e.name,age:e.age,location:e.location,timezone:e.timezone||"UTC",language:e.language||"english",voice_personality:e.voice_personality||"friendly_companion",interests:e.interests||[],learning_goals:e.learning_goals||[],parent_email:e.parent_email||null};console.log("Updating profile data for user:",t.id,r);const a=await fetch("".concat(xm,"/users/profile/").concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await a.json();if(console.log("Profile update response:",{status:a.status,data:i}),!a.ok)throw console.error("Profile update failed:",a.status,i),new Error(i.detail||"Failed to update profile (HTTP ".concat(a.status,")"));n(i),localStorage.setItem("ai_companion_user",JSON.stringify(i)),Rc.success("Profile updated successfully!")}catch(r){throw console.error("Error updating profile:",r),Rc.error("Failed to update profile: ".concat(r.message)),r}}:async e=>{try{const t={name:e.name,age:e.age,location:e.location,timezone:e.timezone||"UTC",language:e.language||"english",voice_personality:e.voice_personality||"friendly_companion",interests:e.interests||[],learning_goals:e.learning_goals||[],parent_email:e.parent_email||null};console.log("Saving profile data:",t);const r=await fetch("".concat(xm,"/users/profile"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json();if(console.log("Profile save response:",{status:r.status,data:a}),!r.ok)throw console.error("Profile save failed:",r.status,a),new Error(a.detail||"Failed to create profile (HTTP ".concat(r.status,")"));n(a),localStorage.setItem("ai_companion_user",JSON.stringify(a)),await S(a.id),await j(a.id),Rc.success("Profile created successfully!")}catch(t){throw console.error("Error saving profile:",t),Rc.error("Failed to save profile: ".concat(t.message)),t}},onDelete:t?async()=>{try{if(null===t||void 0===t||!t.id)throw new Error("No user profile to delete");const e=await fetch("".concat(xm,"/users/profile/").concat(t.id),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json();throw new Error(t.detail||"Failed to delete profile")}n(null),a(null),localStorage.removeItem("ai_companion_user"),o(!0),Rc.success("Profile deleted successfully!")}catch(e){throw console.error("Error deleting profile:",e),Rc.error("Failed to delete profile"),e}}:null,initialData:t}),(0,ma.jsx)(Cp,{isOpen:l,onClose:()=>u(!1),userId:null===t||void 0===t?void 0:t.id,controls:c,onSave:async e=>{try{const n=await fetch("".concat(xm,"/users/").concat(t.id,"/parental-controls"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.detail||"Failed to update parental controls");d(r),Rc.success("Parental controls updated successfully!")}catch(n){throw console.error("Error updating parental controls:",n),n}}})]})};t.createRoot(document.getElementById("root")).render((0,ma.jsx)(e.StrictMode,{children:(0,ma.jsx)(wm,{})}))})()})();
//# sourceMappingURL=main.6d109cfe.js.map